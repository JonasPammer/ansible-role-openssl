<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Jonas Pammer">
<title>ansible-role-openssl</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="article">
<div id="header">
<h1>ansible-role-openssl</h1>
<div class="details">
<span id="author" class="author">Jonas Pammer</span><br>
<span id="email" class="email"><a href="mailto:opensource@jonaspammer.at">opensource@jonaspammer.at</a></span><br>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://galaxy.ansible.com/jonaspammer/openssl"><span class="image"><img src="https://img.shields.io/badge/available%20on%20ansible%20galaxy-jonaspammer.openssl-brightgreen" alt="Version on Galaxy"></span></a>
<a href="https://github.com/JonasPammer/ansible-role-openssl/actions/workflows/ci.yml"><span class="image"><img src="https://github.com/JonasPammer/ansible-role-openssl/actions/workflows/ci.yml/badge.svg" alt="Testing CI"></span></a></p>
</div>
<div class="paragraph">
<p>An Ansible role for generating OpenSSL/x509 Certificate Files
(privatekey, csr, certificate, pkcs12).</p>
</div>
<div class="paragraph">
<p>This role is a wrapper for all related community.crypto modules. It&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>prepares the system by installing packages</p>
</li>
<li>
<p>defines and uses system-specific default openssl directories (see <code>/vars</code>)</p>
</li>
<li>
<p>ensures said directories exist with correct permissions</p>
</li>
<li>
<p>provides ability of shared defaults (e.g. <code>item.default_backup</code>)</p>
</li>
<li>
<p>makes yourself DRY (i.e. by doing <code>x509_certificate.privatekey_passphrase: "{{ item.privatekey_passphrase &#8230;&#8203;</code>)</p>
</li>
<li>
<p>offers the ability to install the certificate to the Systems CA-trust store (<a href="#openssl__system_ca_store_file"><code>openssl__system_ca_store_file</code></a>)
if enabled (see <a href="#install_ca_to_system">[install_ca_to_system]</a>).</p>
</li>
</ul>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#meta">🔎 Metadata</a></li>
<li><a href="#requirements">📌 Requirements</a></li>
<li><a href="#variables">📜 Role Variables</a>
<ul class="sectlevel2">
<li><a href="#_role_variables_to_configure_the_installation_of_cryptography">Role Variables to configure the installation of Cryptography</a></li>
<li><a href="#variables:openssl">OpenSSL</a></li>
<li><a href="#_directory_configuration">Directory Configuration</a></li>
</ul>
</li>
<li><a href="#public_vars">📜 Facts/Variables defined by this role</a></li>
<li><a href="#tags">🏷️ Tags</a></li>
<li><a href="#dependencies">👫 Dependencies</a></li>
<li><a href="#example_playbooks">📚 Example Playbook Usages</a></li>
<li><a href="#development">📝 Development</a>
<ul class="sectlevel2">
<li><a href="#development-system-dependencies">📌 Development Machine Dependencies</a></li>
<li><a href="#development-dependencies">📌 Development Dependencies</a></li>
<li><a href="#development-guidelines">ℹ️ Ansible Role Development Guidelines</a></li>
<li><a href="#versioning">🔢 Versioning</a></li>
<li><a href="#testing">🧪 Testing</a></li>
<li><a href="#development-container-extra">🧃 TIP: Containerized Ideal Development Environment</a></li>
<li><a href="#cookiecutter">🍪 CookieCutter</a></li>
<li><a href="#pre-commit">ℹ️ General Linting and Styling Conventions</a></li>
</ul>
</li>
<li><a href="#contributing">💪 Contributing</a>
<ul class="sectlevel2">
<li><a href="#_preamble">🤝 Preamble</a></li>
<li><a href="#cookiecutter--contributing">🍪 CookieCutter</a></li>
<li><a href="#_conventional_commits">💬 Conventional Commits</a></li>
<li><a href="#_getting_started">🚀 Getting Started</a></li>
</ul>
</li>
<li><a href="#changelog">🗒 Changelog</a></li>
<li><a href="#license">⚖️ License</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="meta">🔎 Metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below you can find information on…</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the role&#8217;s required Ansible version</p>
</li>
<li>
<p>the role&#8217;s supported platforms</p>
</li>
<li>
<p>the role&#8217;s <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html#role-dependencies">role dependencies</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><a href="meta/main.yml" class="bare">meta/main.yml</a></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="nn">---</span>
<span class="na">galaxy_info</span><span class="pi">:</span>
  <span class="na">role_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openssl"</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">An</span><span class="nv"> </span><span class="s">ansible</span><span class="nv"> </span><span class="s">role</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">generating</span><span class="nv"> </span><span class="s">OpenSSL</span><span class="nv"> </span><span class="s">Certificate</span><span class="nv"> </span><span class="s">Files."</span>
  <span class="na">standalone</span><span class="pi">:</span> <span class="kc">true</span>

  <span class="na">author</span><span class="pi">:</span> <span class="s2">"</span><span class="s">jonaspammer"</span>
  <span class="na">license</span><span class="pi">:</span> <span class="s2">"</span><span class="s">MIT"</span>

  <span class="na">min_ansible_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.11"</span>
  <span class="na">platforms</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">EL</span> <span class="c1"># (Enterprise Linux)</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">7"</span> <span class="c1"># actively tested: centos7</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">8"</span> <span class="c1"># actively tested: rockylinux8, centos8</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Fedora</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">35"</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Debian</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">buster</span> <span class="c1"># debian10 (actively tested)</span>
        <span class="pi">-</span> <span class="s">bullseye</span> <span class="c1"># debian11 (actively tested)</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Ubuntu</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">xenial</span> <span class="c1"># ubuntu1604 (actively tested)</span>
        <span class="pi">-</span> <span class="s">bionic</span> <span class="c1"># ubuntu1804 (actively tested)</span>
        <span class="pi">-</span> <span class="s">focal</span> <span class="c1"># ubuntu2004 (actively tested)</span>

  <span class="na">galaxy_tags</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">networking</span>
    <span class="pi">-</span> <span class="s">system</span>
    <span class="pi">-</span> <span class="s">web</span>
    <span class="c1">#    - certbot</span>
    <span class="c1">#    - letsencrypt</span>
    <span class="pi">-</span> <span class="s">encryption</span>
    <span class="pi">-</span> <span class="s">certificates</span>
    <span class="pi">-</span> <span class="s">ssl</span>
    <span class="pi">-</span> <span class="s">https</span>

<span class="na">dependencies</span><span class="pi">:</span> <span class="pi">[]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements">📌 Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Ansible User needs to be able to <code>become</code>.</p>
</div>
<div class="paragraph">
<p>The <a href="https://galaxy.ansible.com/community/crypto"><code>community.crypto</code>-collection</a>
must be installed on the Ansible controller.</p>
</div>
<div class="paragraph">
<p>An up-to-date pip (i.e. &gt;21) must be installed on the host.
Needed for installation of <a href="https://pypi.org/project/cryptography/">
<code>cryptography&gt;3</code> through pip</a>.</p>
</div>
<div class="paragraph">
<p>A Rust compiler must be installed on the host. Needed for installation of
<a href="https://pypi.org/project/cryptography/">cryptography&gt;3 through pip</a>,
if <code>openssl_cryptography_build_rust</code> is true.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="variables">📜 Role Variables</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_role_variables_to_configure_the_installation_of_cryptography">Role Variables to configure the installation of Cryptography</h3>
<div class="paragraph">
<p>The installation of cryptography is often a pain in the ass.
I have yet to find a single exception to this rule.
It has cost me feelingly, or even really, dozens of brain-tearing hours.</p>
</div>
<div class="paragraph">
<p>The below values, and their defaults seem to do the job.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_cryptography_prefer_binary</span><span class="pi">:</span> <span class="kc">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Defines if <code>--prefer-binary</code> is passed to the <code>pip install</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_cryptography_build_rust</span><span class="pi">:</span> <span class="kc">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Defines if the environment-variable <code>CRYPTOGRAPHY_DONT_BUILD_RUST</code> should be set to <code>1</code> (true) or <code>0</code> (false)
while issuing the <code>pip install</code> command.</p>
</div>
</div>
<div class="sect2">
<h3 id="variables:openssl">OpenSSL</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_items</span><span class="pi">:</span> <span class="pi">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>List of ssl key/csr/crt/p12&#8217;s to generate.
An entry may have the following values:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This role gives you control over nearly all variables,
but also fills-in variables on its own (e.g. relative ones like <code>privatekey_path</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">filename (Required)</dt>
<dd>
<p>Name used for every file.</p>
</dd>
</dl>
</div>
<div id="install_ca_to_system" class="dlist">
<dl>
<dt class="hdlist1">install_ca_to_system</dt>
<dd>
<p><em>Boolean</em>. Defaults to <code>false</code>.<br>
Whether to execute steps to integrate the self signed certificate to the
the System&#8217;s CA Trust Store (<a href="#openssl__system_ca_store_file"><code>openssl__system_ca_store_file</code></a>).</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
(Debian/Ubuntu ONLY)
Messed up / Fucked up? Try setting <code>install_ca_to_system_fresh</code> to <code>true</code>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">install_ca_to_system_fresh</dt>
<dd>
<p>(Debian/Ubuntu ONLY)
<em>Boolean</em>. Defaults to value of <code>default_force</code> (if existent) or <code>false</code>.<br>
Invokes <code>update-ca-certificates</code> with <code>--fresh</code>
to remove symlinks in /etc/ssl/certs directory
(<em>before completely resourcing the directory using the configured CA directories and settings</em>).
This thus purges dead / potentially wrong or conflicting certificates.</p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The below values can be used to set the default parameters
of every module where applicable.
See the page of any below module for documentation.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">default_group</dt>
<dt class="hdlist1">default_owner</dt>
<dt class="hdlist1">default_backup</dt>
<dt class="hdlist1">default_selevel</dt>
<dt class="hdlist1">default_serole</dt>
<dt class="hdlist1">default_setype</dt>
<dt class="hdlist1">default_seuser</dt>
<dt class="hdlist1">default_state</dt>
<dt class="hdlist1">default_force</dt>
</dl>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Parameters used to generate OpenSSL private key ('.key')
using <a href="https://docs.ansible.com/ansible/2.9/modules/openssl_privatekey_module.html">openssl_privatekey</a>.</p>
</div>
<div class="paragraph">
<p><code>path</code>, <code>mode</code> and <code>unsafe_writes</code> can not be supplied.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><mark>privatekey_backup</mark></dt>
<dt class="hdlist1">privatekey_cipher</dt>
<dt class="hdlist1">privatekey_curve</dt>
<dt class="hdlist1">privatekey_group</dt>
<dt class="hdlist1">privatekey_owner</dt>
<dt class="hdlist1">privatekey_passphrase</dt>
<dt class="hdlist1"><em>privatekey_selevel</em></dt>
<dt class="hdlist1"><em>privatekey_serole</em></dt>
<dt class="hdlist1"><em>privatekey_setype</em></dt>
<dt class="hdlist1"><em>privatekey_seuser</em></dt>
<dt class="hdlist1"><mark>privatekey_size</mark></dt>
<dt class="hdlist1"><mark>privatekey_state</mark></dt>
<dt class="hdlist1"><mark>privatekey_type</mark></dt>
</dl>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Parameters used to generate OpenSSL Certificate Signing Request with appropriate subject information ('.csr')
using <a href="https://docs.ansible.com/ansible/2.9/modules/openssl_csr_module.html">community.crypto.openssl_csr</a>.</p>
</div>
<div class="paragraph">
<p><code>mode</code>, <code>path</code>, <code>privatekey_passphrase</code>, <code>privatekey_path</code> and <code>unsafe_writes</code> can not be supplied.</p>
</div>
<div class="paragraph">
<p>This role forces you to supply at-least <code>csr_common_name</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">csr_authority_cert_issuer</dt>
<dt class="hdlist1">csr_authority_cert_serial_number</dt>
<dt class="hdlist1">csr_authority_key_identifier</dt>
<dt class="hdlist1"><mark>csr_backup</mark></dt>
<dt class="hdlist1">csr_basic_constraints</dt>
<dt class="hdlist1">csr_basic_constraints_critical</dt>
<dt class="hdlist1"><mark>csr_common_name (Required)</mark></dt>
<dt class="hdlist1"><mark>csr_country_name</mark></dt>
<dt class="hdlist1">csr_create_subject_key_identifier</dt>
<dt class="hdlist1">csr_digest</dt>
<dt class="hdlist1"><mark>csr_email_address</mark></dt>
<dt class="hdlist1">csr_extended_key_usage</dt>
<dt class="hdlist1">csr_extended_key_usage_critical</dt>
<dt class="hdlist1">csr_force</dt>
<dt class="hdlist1">csr_group</dt>
<dt class="hdlist1">csr_key_usage</dt>
<dt class="hdlist1">csr_key_usage_critical</dt>
<dt class="hdlist1">csr_locality_name</dt>
<dt class="hdlist1">csr_ocsp_must_staple</dt>
<dt class="hdlist1">csr_ocsp_must_staple_critical</dt>
<dt class="hdlist1"><mark>csr_organization_name</mark></dt>
<dt class="hdlist1">csr_organizational_unit_name</dt>
<dt class="hdlist1">csr_owner</dt>
<dt class="hdlist1"><em>csr_selevel</em></dt>
<dt class="hdlist1"><em>csr_serole</em></dt>
<dt class="hdlist1"><em>csr_setype</em></dt>
<dt class="hdlist1"><em>csr_seuser</em></dt>
<dt class="hdlist1"><mark>csr_state</mark></dt>
<dt class="hdlist1"><mark>csr_state_or_province_name</mark></dt>
<dt class="hdlist1">csr_subject</dt>
<dt class="hdlist1">csr_subject_alt_name</dt>
<dt class="hdlist1">csr_subject_alt_name_critical</dt>
<dt class="hdlist1">csr_subject_key_identifier</dt>
<dt class="hdlist1">csr_use_common_name_for_san</dt>
</dl>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Parameters used to generate Self Signed OpenSSL certificate ('.crt')
using <a href="https://docs.ansible.com/ansible/2.9/modules/openssl_certificate_module.html">community.crypto.openssl_certificate</a>.</p>
</div>
<div class="paragraph">
<p><code>csr_path</code>,  <code>mode</code>, <code>path</code>, <code>privatekey_passphrase</code> and <code>privatekey_path</code> can not be supplied.
(<code>privatekey_passphrase</code> can be supplied using <code>csr_privatekey_passphrase</code>)</p>
</div>
<div class="paragraph">
<p>This role sets <code>provider</code> to &#8220;selfsigned&#8221; by default.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">x509cert_acme_accountkey_path</dt>
<dt class="hdlist1">x509cert_acme_chain</dt>
<dt class="hdlist1">x509cert_acme_challenge_path</dt>
<dt class="hdlist1">x509cert_attributes</dt>
<dt class="hdlist1"><mark>x509cert_backup</mark></dt>
<dt class="hdlist1">x509cert_entrust_api_client_cert_key_path</dt>
<dt class="hdlist1">x509cert_entrust_api_client_cert_path</dt>
<dt class="hdlist1">x509cert_entrust_api_key</dt>
<dt class="hdlist1">x509cert_entrust_api_specification_path</dt>
<dt class="hdlist1">x509cert_entrust_cert_type</dt>
<dt class="hdlist1">x509cert_entrust_not_after</dt>
<dt class="hdlist1">x509cert_entrust_requester_email</dt>
<dt class="hdlist1">x509cert_entrust_requester_name</dt>
<dt class="hdlist1">x509cert_entrust_requester_phone</dt>
<dt class="hdlist1">x509cert_extended_key_usage</dt>
<dt class="hdlist1">x509cert_extended_key_usage_strict</dt>
<dt class="hdlist1">x509cert_force</dt>
<dt class="hdlist1">x509cert_group</dt>
<dt class="hdlist1">x509cert_has_expired</dt>
<dt class="hdlist1">x509cert_invalid_at</dt>
<dt class="hdlist1">x509cert_issuer</dt>
<dt class="hdlist1">x509cert_issuer_strict</dt>
<dt class="hdlist1">x509cert_key_usage</dt>
<dt class="hdlist1">x509cert_key_usage_strict</dt>
<dt class="hdlist1">x509cert_not_after</dt>
<dt class="hdlist1">x509cert_not_before</dt>
<dt class="hdlist1">x509cert_ownca_create_authority_key_identifier</dt>
<dt class="hdlist1">x509cert_ownca_create_subject_key_identifier</dt>
<dt class="hdlist1">x509cert_ownca_digest</dt>
<dt class="hdlist1">x509cert_ownca_not_after</dt>
<dt class="hdlist1">x509cert_ownca_not_before</dt>
<dt class="hdlist1">x509cert_ownca_path</dt>
<dt class="hdlist1">x509cert_ownca_privatekey_passphrase</dt>
<dt class="hdlist1">x509cert_ownca_privatekey_path</dt>
<dt class="hdlist1">x509cert_ownca_version</dt>
<dt class="hdlist1">x509cert_owner</dt>
<dt class="hdlist1">x509cert_provider</dt>
<dd>
<p>Defaults to <code>selfsigned</code> in this role.</p>
</dd>
<dt class="hdlist1">x509cert_select_crypto_backend</dt>
<dt class="hdlist1"><em>x509cert_selevel</em></dt>
<dt class="hdlist1"><em>x509cert_serole</em></dt>
<dt class="hdlist1"><em>x509cert_setype</em></dt>
<dt class="hdlist1"><em>x509cert_seuser</em></dt>
<dt class="hdlist1">x509cert_selfsigned_create_subject_key_identifier</dt>
<dt class="hdlist1">x509cert_selfsigned_digest</dt>
<dt class="hdlist1"><mark>x509cert_selfsigned_not_after</mark></dt>
<dt class="hdlist1"><mark>x509cert_selfsigned_not_before</mark></dt>
<dt class="hdlist1">x509cert_selfsigned_version</dt>
<dt class="hdlist1">x509cert_signature_algorithms</dt>
<dt class="hdlist1"><mark>x509cert_state</mark></dt>
<dt class="hdlist1">x509cert_subject</dt>
<dt class="hdlist1">x509cert_subject_alt_name</dt>
<dt class="hdlist1">x509cert_subject_alt_name_strict</dt>
<dt class="hdlist1">x509cert_subject_strict</dt>
<dt class="hdlist1">x509cert_valid_at</dt>
<dt class="hdlist1">x509cert_valid_in</dt>
<dt class="hdlist1">x509cert_version</dt>
</dl>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Parameters used to generate Self Signed OpenSSL certificate ('.crt')
<a href="https://docs.ansible.com/ansible/latest/collections/community/crypto/openssl_pkcs12_module.html">community.crypto.openssl_pkcs12</a>.</p>
</div>
<div class="paragraph">
<p><code>action</code>, <code>certificate_path</code>, <code>friendly_name</code>, <code>mode</code>,  <code>path</code>, <code>privatekey_passphrase</code>, <code>privatekey_path</code>, <code>return_content</code> and <code>unsafe_writes</code> can not be supplied.
(<code>privatekey_passphrase</code> can be supplied using <code>csr_privatekey_passphrase</code>)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">pkcs12_attributes</dt>
<dt class="hdlist1">pkcs12_backup</dt>
<dt class="hdlist1">pkcs12_force</dt>
<dt class="hdlist1">pkcs12_group</dt>
<dt class="hdlist1">pkcs12_iter_size</dt>
<dt class="hdlist1">pkcs12_maciter_size</dt>
<dt class="hdlist1">pkcs12_other_certificates</dt>
<dt class="hdlist1">pkcs12_other_certificates_parse_all</dt>
<dt class="hdlist1">pkcs12_owner</dt>
<dt class="hdlist1">pkcs12_passphrase</dt>
<dt class="hdlist1">pkcs12_select_crypto_backend</dt>
<dt class="hdlist1">pkcs12_selevel</dt>
<dt class="hdlist1">pkcs12_serole</dt>
<dt class="hdlist1">pkcs12_setype</dt>
<dt class="hdlist1">pkcs12_seuser</dt>
<dt class="hdlist1">pkcs12_state</dt>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_directory_configuration">Directory Configuration</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_directory</span><span class="pi">:</span> <span class="s">~</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If given, this sets the default for the <code>openssl_[key|crt|csr]_directory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_key_directory</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">OS-specific by default</span><span class="pi">,</span> <span class="nv">see /vars directory</span><span class="pi">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This directory stores sensitive objects (<code>key</code>, <code>p12</code> and <code>pkcs12</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_crt_directory</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">OS-specific by default</span><span class="pi">,</span> <span class="nv">see /vars directory</span><span class="pi">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This directory stores public, non-persistent objects (<code>csr</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">openssl_csr_directory</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">OS-specific by default</span><span class="pi">,</span> <span class="nv">see /vars directory</span><span class="pi">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This directory stores public, persistent objects (<code>crt</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="public_vars">📜 Facts/Variables defined by this role</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each variable listed in this section
is dynamically defined when executing this role (and can only be overwritten using <code>ansible.builtin.set_facts</code>) <em>and</em>
is meant to be used not just internally.</p>
</div>
<div id="openssl__system_ca_store_file" class="sidebarblock">
<div class="content">
<div class="title"><code>openssl__system_ca_store_file</code></div>
<div class="paragraph">
<p>Location of the System&#8217;s trusted CA Certificate Store/Bundle File.
As per <a href="https://serverfault.com/a/722646" class="bare">https://serverfault.com/a/722646</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tags">🏷️ Tags</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tasks are tagged with the following
<a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_tags.html#adding-tags-to-roles">tags</a>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">This role does not have officially documented tags yet.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can use Ansible to skip tasks, or only run certain tasks by using these tags. By default, all tasks are run when no tags are specified.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependencies">👫 Dependencies</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="example_playbooks">📚 Example Playbook Usages</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This role is part of <a href="https://github.com/JonasPammer/ansible-roles">
many compatible purpose-specific roles of mine</a>.</p>
</div>
<div class="paragraph">
<p>The machine needs to be prepared.
In CI, this is done in <code>molecule/resources/prepare.yml</code>
which sources its soft dependencies from <code>requirements.yml</code>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="molecule/resources/prepare.yml" class="bare">molecule/resources/prepare.yml</a></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">prepare</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">all</span>
  <span class="na">become</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">gather_facts</span><span class="pi">:</span> <span class="kc">false</span>

  <span class="na">roles</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">jonaspammer.bootstrap</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">jonaspammer.pip</span>
    <span class="c1">#    - name: jonaspammer.core_dependencies</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following diagram is a compilation of the "soft dependencies" of this role
as well as the recursive tree of their soft dependencies.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://raw.githubusercontent.com/JonasPammer/ansible-roles/master/graphs/dependencies_openssl.svg" alt="requirements.yml dependency graph of jonaspammer.openssl"></span></p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Common Play / OpenSSL Item</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jonaspammer.openssl</span>

<span class="na">vars</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">filename</span><span class="pi">:</span> <span class="s">common_jonaspammer_at</span>
    <span class="na">csr_common_name</span><span class="pi">:</span> <span class="s">common.jonaspammer.at</span>
    <span class="na">csr_country_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AT"</span>
    <span class="na">csr_state_or_province_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Vorarlberg"</span>
    <span class="na">csr_locality_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bregenz"</span>
    <span class="na">csr_email_address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">opensource@jonaspammer.at"</span>

    <span class="na">privatekey_backup</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">install_ca_to_system</span><span class="pi">:</span> <span class="kc">true</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. Minimum Viable Play / OpenSSL Item</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The following play:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jonaspammer.openssl</span>

<span class="na">vars</span><span class="pi">:</span>
  <span class="na">openssl_items</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">filename</span><span class="pi">:</span> <span class="s">jonaspammer_at</span>
      <span class="na">csr_common_name</span><span class="pi">:</span> <span class="s">jonaspammer.at</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>creates the following files (on Debian):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@instance-py3-ansible-5-ubuntu1604:/# ls -l /etc/ssl/private/ # openssl_key_directory
total 16
-rw------- 1 root root 3243 Jun 23 09:37 jonaspammer_at.key
-rw-r----- 1 root root 5031 Jun 23 09:37 jonaspammer_at.keycrt
-rw-r----- 1 root root 4024 Jun 23 09:37 jonaspammer_at.p12

root@instance-py3-ansible-5-ubuntu1604:/# ls -l /etc/ssl/misc # openssl_csr_directory
total 4
-rw-r--r-- 1 root root 1651 Jun 23 09:37 jonaspammer_at.csr

root@instance-py3-ansible-5-ubuntu1604:/# ls -l /etc/ssl/certs # openssl_crt_directory
total 580
lrwxrwxrwx 1 root root     49 Sep 19  2021 01419da9.0 -&gt; Microsoft_ECC_Root_Certificate_Authority_2017.pem
lrwxrwxrwx 1 root root     45 Sep 19  2021 02265526.0 -&gt; Entrust_Root_Certification_Authority_-_G2.pem
…
-rw-r--r-- 1 root root   1789 Jun 23 09:37 jonaspammer_at.crt
…

# Below commands as seen in https://www.xolphin.com/support/OpenSSL/Frequently_used_OpenSSL_Commands

root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl x509 -text -noout -in certs/jonaspammer_at.crt
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            0a:03:4d:1e:db:b5:48:d2:13:d8:1c:d5:28:46:41:1d:7c:1c:f1:7f
    Signature Algorithm: sha256WithRSAEncryption
        Issuer: CN=jonaspammer.at
        Validity
            Not Before: Jun 23 09:37:25 2022 GMT
            Not After : Jun 20 09:37:25 2032 GMT
        Subject: CN=jonaspammer.at
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (4096 bit)
                Modulus:
                    00:cf:62:15:5b:cb:3e:3a:7c:3a:9b:5e:5e:47:37:
                    ………
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Alternative Name:
                DNS:jonaspammer.at
            X509v3 Subject Key Identifier:
                6C:5E:12:CE:E1:98:4C:F1:B4:74:4E:AB:C4:1E:93:15:69:79:72:3B
    Signature Algorithm: sha256WithRSAEncryption
         21:f6:11:83:83:15:01:62:e2:78:8e:78:44:cd:0e:8c:01:00:
         ………

root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl req -text -noout -verify -in misc/jonaspammer_at.csr
verify OK
Certificate Request:
    Data:
        Version: 0 (0x0)
        Subject: CN=jonaspammer.at
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (4096 bit)
                Modulus:
                    00:cf:62:15:5b:cb:3e:3a:7c:3a:9b:5e:5e:47:37:
                    ………
                Exponent: 65537 (0x10001)
        Attributes:
        Requested Extensions:
            X509v3 Subject Alternative Name:
                DNS:jonaspammer.at
    Signature Algorithm: sha256WithRSAEncryption
         81:09:f3:cf:55:3c:ef:2f:6c:b7:5e:cd:64:d0:66:f5:1d:d4:
         ………

root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl rsa -noout -in private/jonaspammer_at.key -check
RSA key ok

root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl pkcs12 -noout -info -in private/jonaspammer_at.p12
Enter Import Password:
MAC Iteration 1
MAC verified OK
PKCS7 Data
Certificate bag
PKCS7 Data
Key bag

# Checking the MD5 hash of the public key to check if it is equal to what is in the CSR or private key.
root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl x509 -noout -modulus -in certs/jonaspammer_at.crt | openssl md5
-in private/jonaspammer_at.key | openssl md5
opens(stdin)= da1f0a7e379330443660f098bfb64043
root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl rsa -noout -modulus -in private/jonaspammer_at.key | openssl md5
sl req -noout -modulus -in misc/jonaspammer_at.csr(stdin)= da1f0a7e379330443660f098bfb64043
root@instance-py3-ansible-5-ubuntu1604:/etc/ssl# openssl req -noout -modulus -in misc/jonaspammer_at.csr | openssl md5
(stdin)= da1f0a7e379330443660f098bfb64043</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="development">📝 Development</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://conventionalcommits.org"><span class="image"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits"></span></a>
<a href="https://results.pre-commit.ci/latest/github/JonasPammer/ansible-role-openssl/master"><span class="image"><img src="https://results.pre-commit.ci/badge/github/JonasPammer/ansible-role-openssl/master.svg" alt="pre-commit.ci status"></span></a></p>
</div>
<div class="sect2">
<h3 id="development-system-dependencies">📌 Development Machine Dependencies</h3>
<div class="ulist">
<ul>
<li>
<p>Python 3.8 or greater</p>
</li>
<li>
<p>Docker</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="development-dependencies">📌 Development Dependencies</h3>
<div class="paragraph">
<p>Development Dependencies are defined in a
<a href="https://pip.pypa.io/en/stable/user_guide/#requirements-files">pip requirements file</a>
named <code>requirements-dev.txt</code>.
Example Installation Instructions for Linux are shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># "optional": create a python virtualenv and activate it for the current shell session
$ python3 -m venv venv
$ source venv/bin/activate

$ python3 -m pip install -r requirements-dev.txt</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="development-guidelines">ℹ️ Ansible Role Development Guidelines</h3>
<div class="paragraph">
<p>Please take a look at my <a href="https://github.com/JonasPammer/cookiecutter-ansible-role/blob/master/ROLE_DEVELOPMENT_GUIDELINES.adoc">
Ansible Role Development Guidelines</a>.</p>
</div>
<div class="paragraph">
<p>If interested, I&#8217;ve also written down some
<a href="https://github.com/JonasPammer/cookiecutter-ansible-role/blob/master/ROLE_DEVELOPMENT_TIPS.adoc">
General Ansible Role Development (Best) Practices</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="versioning">🔢 Versioning</h3>
<div class="paragraph">
<p>Versions are defined using <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">Tags</a>,
which in turn are <a href="https://galaxy.ansible.com/docs/contributing/version.html">recognized and used</a> by Ansible Galaxy.</p>
</div>
<div class="paragraph">
<p><strong>Versions must not start with <code>v</code>.</strong></p>
</div>
<div class="paragraph">
<p>When a new tag is pushed, <a href="https://github.com/JonasPammer/ansible-role-openssl/actions/workflows/release-to-galaxy.yml">
a GitHub CI workflow</a>
(<span class="image"><img src="https://github.com/JonasPammer/ansible-role-openssl/actions/workflows/release-to-galaxy.yml/badge.svg" alt="Release CI"></span>)
takes care of importing the role to my Ansible Galaxy Account.</p>
</div>
</div>
<div class="sect2">
<h3 id="testing">🧪 Testing</h3>
<div class="paragraph">
<p>Automatic Tests are run on each Contribution using GitHub Workflows.</p>
</div>
<div class="paragraph">
<p>The Tests primarily resolve around running
<a href="https://molecule.readthedocs.io/en/latest/">Molecule</a>
on a varying set of linux distributions and using various ansible versions,
as detailed in <a href="https://github.com/JonasPammer/ansible-roles">JonasPammer/ansible-roles</a>.</p>
</div>
<div class="paragraph">
<p>The molecule test also includes a step which lints all ansible playbooks using
<a href="https://github.com/ansible/ansible-lint#readme"><code>ansible-lint</code></a>
to check for best practices and behaviour that could potentially be improved.</p>
</div>
<div class="paragraph">
<p>To run the tests, simply run <code>tox</code> on the command line.
You can pass an optional environment variable to define the distribution of the
Docker container that will be spun up by molecule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ MOLECULE_DISTRO=centos7 tox</pre>
</div>
</div>
<div class="paragraph">
<p>For a list of possible values fed to <code>MOLECULE_DISTRO</code>,
take a look at the matrix defined in <a href=".github/workflows/ci.yml" class="bare">.github/workflows/ci.yml</a>.</p>
</div>
<div class="sect3">
<h4 id="_debugging_a_molecule_container">🐛 Debugging a Molecule Container</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run your molecule tests with the option <code>MOLECULE_DESTROY=never</code>, e.g.:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>MOLECULE_DESTROY=never MOLECULE_DISTRO=<mark>ubuntu1604</mark> tox -e py3-ansible-<mark>5</mark></strong>
...
  TASK [ansible-role-pip : (redacted).] ************************
  failed: [instance-py3-ansible-5] => changed=false
...
 ___________________________________ summary ____________________________________
  pre-commit: commands succeeded
ERROR:   py3-ansible-5: commands failed</pre>
</div>
</div>
</li>
<li>
<p>Find out the name of the molecule-provisioned docker container:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>docker ps</strong>
<mark>30e9b8d59cdf</mark>   geerlingguy/docker-debian10-ansible:latest   "/lib/systemd/systemd"   8 minutes ago   Up 8 minutes                                                                                                    instance-py3-ansible-5</pre>
</div>
</div>
</li>
<li>
<p>Get into a bash Shell of the container, and do your debugging:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>docker exec -it <mark>30e9b8d59cdf</mark> /bin/bash</strong>

root@instance-py3-ansible-2:/#
root@instance-py3-ansible-2:/# python3 --version
Python 3.8.10
root@instance-py3-ansible-2:/# ...</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the failure you try to debug is part of <code>verify.yml</code> step and not the actual <code>converge.yml</code>,
you may want to know that the output of ansible&#8217;s modules (<code>vars</code>), hosts (<code>hostvars</code>) and environment variables have been stored into files
on both the provisioner and inside the docker machine under:
* <code>/var/tmp/vars.yml</code>
* <code>/var/tmp/hostvars.yml</code>
* <code>/var/tmp/environment.yml</code>
<code>grep</code>, <code>cat</code> or transfer these as you wish!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You may also want to know that the files mentioned in the admonition above
are attached to the <strong>GitHub CI Artifacts</strong> of a given Workflow run.<br>
This allows one to check the difference between runs
and thus help in debugging what caused the bit-rot or failure in general.
image::https://user-images.githubusercontent.com/32995541/178442403-e15264ca-433a-4bc7-95db-cfadb573db3c.png[]</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After you finished your debugging, exit it and destroy the container:</p>
<div class="listingblock">
<div class="content">
<pre>root@instance-py3-ansible-2:/# <strong>exit</strong>

$ <strong>docker stop <mark>30e9b8d59cdf</mark></strong>

$ <strong>docker container rm <mark>30e9b8d59cdf</mark></strong>
<em>or</em>
$ <strong>docker container prune</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="development-container-extra">🧃 TIP: Containerized Ideal Development Environment</h3>
<div class="paragraph">
<p>This Project offers a definition for a "1-Click Containerized Development Environment".</p>
</div>
<div class="paragraph">
<p>This Container even allow one to run docker containers inside of them (Docker-In-Docker, dind),
allowing for molecule execution.</p>
</div>
<div class="paragraph">
<p>To use it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you fullfill the <a href="https://code.visualstudio.com/docs/remote/containers#_system-requirements">
the System requirements of Visual Studio Code Development Containers</a>,
optionally following the <em>Installation</em>-Section of the linked page section.<br>
This includes: Installing Docker, Installing Visual Studio Code itself, and Installing the necessary Extension.</p>
</li>
<li>
<p>Clone the project to your machine</p>
</li>
<li>
<p>Open the folder of the repo in Visual Studio Code (<em>File - Open Folder…</em>).</p>
</li>
<li>
<p>If you get a prompt at the lower right corner informing you about the presence of the devcontainer definition,
you can press the accompanying button to enter it.
<strong>Otherwise,</strong> you can also execute the Visual Studio Command <code>Remote-Containers: Open Folder in Container</code> yourself (<em>View - Command Palette</em> &#8594; <em>type in the mentioned command</em>).</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>I recommend using <code>Remote-Containers: Rebuild Without Cache and Reopen in Container</code>
once here and there as the devcontainer feature does have some problems recognizing
changes made to its definition properly some times.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You may need to configure your host system to enable the container to use your SSH Keys.</p>
</div>
<div class="paragraph">
<p>The procedure is described <a href="https://code.visualstudio.com/docs/remote/containers#_sharing-git-credentials-with-your-container">
in the official devcontainer docs under "Sharing Git credentials with your container"</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="cookiecutter">🍪 CookieCutter</h3>
<div class="paragraph">
<p>This Project shall be kept in sync with
<a href="https://github.com/JonasPammer/cookiecutter-ansible-role">the CookieCutter it was originally templated from</a>
using <a href="https://github.com/cruft/cruft">cruft</a> (if possible) or manual alteration (if needed)
to the best extend possible.</p>
</div>
<div class="quoteblock">
<div class="title">Official Example Usage of <code>cruft update</code></div>
<blockquote>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/cruft/cruft/master/art/example_update.gif" alt="Official Example Usage of `cruft update`">
</div>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_changelog">🕗 Changelog</h4>
<div class="paragraph">
<p>When a new tag is pushed, an appropriate GitHub Release will be created
by the Repository Maintainer to provide a proper human change log with a title and description.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pre-commit">ℹ️ General Linting and Styling Conventions</h3>
<div class="paragraph">
<p>General Linting and Styling Conventions are
<a href="https://stackoverflow.blog/2020/07/20/linters-arent-in-your-way-theyre-on-your-side/"><strong>automatically</strong> held up to Standards</a>
by various <a href="https://pre-commit.com/"><code>pre-commit</code></a> hooks, at least to some extend.</p>
</div>
<div class="paragraph">
<p>Automatic Execution of pre-commit is done on each Contribution using
<a href="https://pre-commit.ci/"><code>pre-commit.ci</code></a><a href="#note_pre-commit-ci">*</a>.
Pull Requests even automatically get fixed by the same tool,
at least by hooks that automatically alter files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Not to confuse:
Although some pre-commit hooks may be able to warn you about script-analyzed flaws in syntax or even code to some extend (for which reason pre-commit&#8217;s hooks are <strong>part of</strong> the test suite),
pre-commit itself does not run any real Test Suites.
For Information on Testing, see <a href="#testing">🧪 Testing</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div id="note_pre-commit-ci" class="paragraph">
<p>Nevertheless, I recommend you to integrate pre-commit into your local development workflow yourself.</p>
</div>
<div class="paragraph">
<p>This can be done by cd&#8217;ing into the directory of your cloned project and running <code>pre-commit install</code>.
Doing so will make git run pre-commit checks on every commit you make,
aborting the commit themselves if a hook alarm&#8217;ed.</p>
</div>
<div class="paragraph">
<p>You can also, for example, execute pre-commit&#8217;s hooks at any time by running <code>pre-commit run --all-files</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing">💪 Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square" alt="PRs Welcome"></span>
<a href="https://open.vscode.dev/JonasPammer/ansible-role-openssl"><span class="image"><img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="Open in Visual Studio Code"></span></a></p>
</div>
<div class="paragraph">
<p>The following sections are generic in nature and are used to help new contributors.
The actual "Development Documentation" of this project is found under <a href="#development">📝 Development</a>.</p>
</div>
<div class="sect2">
<h3 id="_preamble">🤝 Preamble</h3>
<div class="paragraph">
<p>First off, thank you for considering contributing to this Project.</p>
</div>
<div class="paragraph">
<p>Following these guidelines helps to communicate that you respect the time of the developers managing and developing this open source project.
In return, they should reciprocate that respect in addressing your issue, assessing changes, and helping you finalize your pull requests.</p>
</div>
</div>
<div class="sect2">
<h3 id="cookiecutter--contributing">🍪 CookieCutter</h3>
<div class="paragraph">
<p>This Project owns many of its files to
<a href="https://github.com/JonasPammer/cookiecutter-ansible-role">the CookieCutter it was originally templated from</a>.</p>
</div>
<div class="paragraph">
<p>Please check if the edit you have in mind is actually applicable to the template
and if so make an appropriate change there instead.
Your change may also be applicable partly to the template
as well as partly to something specific to this project,
in which case you would be creating multiple PRs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conventional_commits">💬 Conventional Commits</h3>
<div class="paragraph">
<p>A casual contributor does not have to worry about following
<a href="https://github.com/JonasPammer/JonasPammer/blob/master/demystifying/conventional_commits.adoc"><em>the spec</em></a>
<a href="https://www.conventionalcommits.org/en/v1.0.0/"><em>by definition</em></a>,
as pull requests are being squash merged into one commit in the project.
Only core contributors, i.e. those with rights to push to this project&#8217;s branches, must follow it
(e.g. to allow for automatic version determination and changelog generation to work).</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started">🚀 Getting Started</h3>
<div class="paragraph">
<p>Contributions are made to this repo via Issues and Pull Requests (PRs).
A few general guidelines that cover both:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Search for existing Issues and PRs before creating your own.</p>
</li>
<li>
<p>If you&#8217;ve never contributed before, see <a href="https://auth0.com/blog/a-first-timers-guide-to-an-open-source-project/">
the first timer&#8217;s guide on Auth0&#8217;s blog</a> for resources and tips on how to get started.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_issues">Issues</h4>
<div class="paragraph">
<p>Issues should be used to report problems, request a new feature, or to discuss potential changes <strong>before</strong> a PR is created.
When you <a href="https://github.com/JonasPammer/ansible-role-openssl/issues/new">
create a new Issue</a>, a template will be loaded that will guide you through collecting and providing the information we need to investigate.</p>
</div>
<div class="paragraph">
<p>If you find an Issue that addresses the problem you&#8217;re having,
please add your own reproduction information to the existing issue <strong>rather than creating a new one</strong>.
Adding a <a href="https://github.blog/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/">reaction</a>
can also help be indicating to our maintainers that a particular problem is affecting more than just the reporter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pull_requests">Pull Requests</h4>
<div class="paragraph">
<p>PRs to this Project are always welcome and can be a quick way to get your fix or improvement slated for the next release.
<a href="https://blog.ploeh.dk/2015/01/15/10-tips-for-better-pull-requests/">In general</a>, PRs should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only fix/add the functionality in question <strong>OR</strong> address wide-spread whitespace/style issues, not both.</p>
</li>
<li>
<p>Add unit or integration tests for fixed or changed functionality (if a test suite already exists).</p>
</li>
<li>
<p><strong>Address a single concern</strong></p>
</li>
<li>
<p><strong>Include documentation</strong> in the repo</p>
</li>
<li>
<p>Be accompanied by a complete Pull Request template (loaded automatically when a PR is created).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For changes that address core functionality or would require breaking changes (e.g. a major release),
it&#8217;s best to open an Issue to discuss your proposal first.</p>
</div>
<div class="paragraph">
<p>In general, we follow the "fork-and-pull" Git workflow</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fork the repository to your own Github account</p>
</li>
<li>
<p>Clone the project to your machine</p>
</li>
<li>
<p>Create a branch locally with a succinct but descriptive name</p>
</li>
<li>
<p>Commit changes to the branch</p>
</li>
<li>
<p>Following any formatting and testing guidelines specific to this repo</p>
</li>
<li>
<p>Push changes to your fork</p>
</li>
<li>
<p>Open a PR in our repository and follow the PR template so that we can efficiently review the changes.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changelog">🗒 Changelog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please refer to the
<a href="https://github.com/JonasPammer/ansible-role-openssl/releases">Release Page of this Repository</a>
for a human changelog of the corresponding
<a href="https://github.com/JonasPammer/ansible-role-openssl/tags">Tags (Versions) of this Project</a>.</p>
</div>
<div class="paragraph">
<p>Note that this Project adheres to Semantic Versioning.
Please report any accidental breaking changes of a minor version update.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license">⚖️ License</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title"><a href="LICENSE" class="bare">LICENSE</a></div>
<div class="content">
<pre>MIT License

Copyright (c) 2022, Jonas Pammer

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-15 12:12:40 UTC
</div>
</div>
</body>
</html>